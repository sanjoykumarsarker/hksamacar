(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{93:function(t,e,n){"use strict";n.r(e);var o=n(7),a={props:["customer"],data:function(){return{loading:!1,loadingTotal:!0,columns:[{label:"DATE",name:"date",orderable:!1},{label:"PAID_BY",name:"paid_by",orderable:!1},{label:"DEBIT",name:"debit",orderable:!1},{label:"CREDIT",name:"credit",orderable:!1},{label:"ACTION",name:"Delete",event:"click",handler:this.selectRow,component:o.a,classes:""}],total_due:""}},computed:{url:function(){return"".concat(axios.defaults.baseURL,"/api/customer/account/").concat(this.customer.id)}},mounted:function(){this.loadTotalDue()},methods:{selectRow:function(t,e){this.selected=t,"edit"===e?this.openEditModal():"delete"===e&&this.openDeleteAlert()},openDeleteAlert:function(){window.ModalBus.$emit("open",{component:function(){return n.e(4).then(n.bind(null,90))},alert:!0,props:{type:"error",handleClick:this.yesClicked}})},yesClicked:function(){var t=this;this.selected&&axios.delete("/account/".concat(this.selected.id)).then((function(e){t.$toast.success(e.data.success),setTimeout((function(){return window.ModalBus.$emit("close")}),500)})).catch((function(e){return t.$toast.error("".concat(e.message))})).finally((function(){return t.selected=null}))},openEditModal:function(){window.ModalBus.$emit("open",{component:function(){return n.e(2).then(n.bind(null,89))},title:"Edit Stock",props:{customer:this.customer,preaccount:this.selected}})},loadTotalDue:function(){var t=this;this.loadingTotal=!0,axios.get("api/customer/due/"+this.customer.id).then((function(e){var n=e.data;return t.total_due=n.due}),this.loadingTotal=!1).catch((function(e){return t.$toast.error("".concat(e.message))}))}}},l=n(0),s=Object(l.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"mb-2"},[n("span",{staticClass:"text-lg text-theme-6 pb-3"},[t._v("Total Due: "+t._s(t.total_due))]),t._v(" "),t.loadingTotal?n("feather",{staticClass:"text-theme-6",attrs:{type:"rotate-cw",animation:"spin"}}):t._e()],1),t._v(" "),n("data-table",{attrs:{url:t.url,"order-dir":"desc",columns:t.columns,framework:"tailwind"}},[n("div",{attrs:{slot:"filters"},slot:"filters"})])],1)}),[],!1,null,null,null);e.default=s.exports}},0,[2,4]]);