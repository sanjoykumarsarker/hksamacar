(window.webpackJsonp=window.webpackJsonp||[]).push([[2,3],{11:function(t,e,n){var a=n(5),o=n(34);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);t.exports=o.locals||{}},33:function(t,e,n){"use strict";n(11)},34:function(t,e,n){(t.exports=n(6)(!1)).push([t.i,"input[type=number][data-v-471104aa]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][data-v-471104aa]{-moz-appearance:textfield}",""])},89:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n.n(a);function r(t,e,n,a,o,r,s){try{var i=t[r](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(a,o)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={props:["customer","preaccount"],data:function(){return{payment_modes:["cash","bkash","bank","others"],form:{credit:"",date:(new Date).toISOString().slice(0,10),payment_mode:"cash",sale_id:""},loadingUnpaid:!1,unpaids:null,account:{},hasDebit:!1}},mounted:function(){this.preaccount&&(this.form=this.preaccount,this.hasDebit=this.preaccount.hasOwnProperty("debit")&&this.preaccount.debit)},methods:{unload:function(){this.unpaids=null},reset:function(){this.form=i(i({},this.form),{},{credit:"",sale_id:"",paid_by:""}),this.unpaids=null},submit:function(){var t=this,e=i(i({},this.form),{},{customer_id:this.customer.id});axios.post("account",e).then((function(e){t.account=e.data.account,t.$toast.success(e.data.success),t.reset(),t.$emit("update",t.account)})).catch((function(e){return t.$toast.error("".concat(e.message))}))},unpaidSelected:function(){var t=this,e=this.unpaids.find((function(e){return e.id===t.form.sale_id}));this.form.credit=e.due,this.form.paid_by=e.paid_by},loadUnpaid:function(){var t,e=this;return(t=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingUnpaid=!0,t.next=3,axios.get("/api/unpaids/".concat(e.customer.id)).then((function(t){var n=t.data;n.sales.length>0?e.unpaids=n.sales:e.$toast.warning("Sorry!, No Due Invoice Left")})).catch((function(t){return e.$toast.error("".concat(t.message))}));case 3:e.loadingUnpaid=!1;case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,o){var s=t.apply(e,n);function i(t){r(s,a,o,i,c,"next",t)}function c(t){r(s,a,o,i,c,"throw",t)}i(void 0)}))})()},update:function(){var t=this;axios.put("/account/".concat(this.preaccount.id),this.form).then((function(e){t.$toast.success(e.data.success),t.reset(),setTimeout((function(){return window.ModalBus.$emit("close")}),300),t.$emit("update")})).catch((function(e){return t.$toast.error("".concat(e.message))}))}}},l=(n(33),n(0)),d=Object(l.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"grid grid-cols-12 gap-5"},[n("div",{staticClass:"col-span-12 xl:col-span-4"},[n("label",[t._v("Date")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.date,expression:"form.date"}],staticClass:"input w-full border mt-2",attrs:{type:"date",placeholder:"Date"},domProps:{value:t.form.date},on:{input:function(e){e.target.composing||t.$set(t.form,"date",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"col-span-12 xl:col-span-3"},[n("label",[t._v("Payment Mode")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.payment_mode,expression:"form.payment_mode"}],staticClass:"input w-full border mt-2",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"payment_mode",e.target.multiple?n:n[0])}}},t._l(t.payment_modes,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(t._s(e.toUpperCase()))])})),0)]),t._v(" "),n("div",{staticClass:"col-span-12 xl:col-span-5"},[n("label",[t._v("Invoice Id")]),t._v(" "),n("div",{staticClass:"relative mt-2",class:{"animate-pulse":t.loadingUnpaid}},[null===t.unpaids?n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.sale_id,expression:"form.sale_id"}],staticClass:"input w-full border pr-10",attrs:{type:"text",placeholder:"Invoice Id"},domProps:{value:t.form.sale_id},on:{input:function(e){e.target.composing||t.$set(t.form,"sale_id",e.target.value)}}}):t._e(),t._v(" "),n("div",{staticClass:"absolute cursor-pointer top-0 w-12 h-full flex items-center justify-center border text-white",class:t.unpaids?"left-0 rounded-l bg-theme-6":" bg-theme-1 right-0 rounded-r",on:{click:function(e){t.unpaids?t.unload():t.loadUnpaid()}}},[t._v(t._s(t.unpaids?"Unload":"Unpaid"))]),t._v(" "),t.unpaids?n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.sale_id,expression:"form.sale_id"}],staticClass:"input w-full border pl-16",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"sale_id",e.target.multiple?n:n[0])},t.unpaidSelected]}},[n("option",{attrs:{value:""}},[t._v("Select One")]),t._v(" "),t._l(t.unpaids,(function(e,a){return n("option",{key:a,domProps:{value:e.id}},[t._v("#INV"+t._s(e.id)+"-"+t._s(e.date))])}))],2):t._e()])]),t._v(" "),t.hasDebit?n("div",{staticClass:"col-span-6 xl:col-span-3"},[n("label",[t._v("Debit")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.debit,expression:"form.debit",modifiers:{number:!0}}],staticClass:"input w-full border mt-2",attrs:{type:"number",placeholder:"Debit",required:""},domProps:{value:t.form.debit},on:{input:function(e){e.target.composing||t.$set(t.form,"debit",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]):t._e(),t._v(" "),n("div",{class:"col-span-12 xl:col-span-"+(t.hasDebit?"3":"6")},[n("label",[t._v(t._s(t.hasDebit?"Credit":"Amount"))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.credit,expression:"form.credit",modifiers:{number:!0}}],staticClass:"input w-full border mt-2",attrs:{type:"number",placeholder:"Amount",required:""},domProps:{value:t.form.credit},on:{input:function(e){e.target.composing||t.$set(t.form,"credit",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"col-span-12 xl:col-span-6"},[n("label",[t._v("Paid By")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.paid_by,expression:"form.paid_by",modifiers:{number:!0}}],staticClass:"input w-full border mt-2",attrs:{type:"text",placeholder:"Paid By"},domProps:{value:t.form.paid_by},on:{input:function(e){e.target.composing||t.$set(t.form,"paid_by",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),n("div",{staticClass:"flex justify-end mt-5"},[n("loading-button",{on:{click:function(e){e.preventDefault(),t.preaccount?t.update():t.submit()}}})],1)])}),[],!1,null,"471104aa",null);e.default=d.exports},96:function(t,e,n){"use strict";n.r(e);var a={props:["product","total_stock","stock"],data:function(){return{form:{amount:"",expense:"",placement:""}}},mounted:function(){this.stock&&(this.form=this.stock)},methods:{submit:function(){var t=this;axios.post("product/".concat(this.product.id,"/stock"),this.form).then((function(e){t.$toast.success("".concat(e.data.success)),t.form={amount:"",expense:"",placement:""},t.$emit("update")})).catch((function(e){return t.$toast.error(e.response?e.response.data.message:e.message)}))},closeModal:function(){setTimeout((function(){return window.ModalBus.$emit("close")}),300)},update:function(){var t=this;axios.put("product/".concat(this.product.id,"/stock/").concat(this.stock.id),this.form).then((function(e){t.$toast.success("".concat(e.data.success)),t.$emit("update"),t.closeModal()})).catch((function(e){return t.$toast.error(e.response?e.response.data.message:e.message)}))}}},o=n(0),r=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.stock?t._e():n("div",{staticClass:"text-2xl mb-3 text-gray-600"},[t._v("Current Stock: "+t._s(t.total_stock))]),t._v(" "),n("div",{staticClass:"grid grid-cols-12 gap-5"},[n("div",{staticClass:"col-span-12 xl:col-span-5"},[n("label",[t._v("Amount")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.amount,expression:"form.amount",modifiers:{number:!0}}],staticClass:"input w-full border mt-2",attrs:{type:"text",placeholder:"Amount"},domProps:{value:t.form.amount},on:{input:function(e){e.target.composing||t.$set(t.form,"amount",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"col-span-12 xl:col-span-3"},[n("label",[t._v("Expense")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.expense,expression:"form.expense",modifiers:{number:!0}}],staticClass:"input w-full border mt-2",attrs:{type:"text",placeholder:"Expense"},domProps:{value:t.form.expense},on:{input:function(e){e.target.composing||t.$set(t.form,"expense",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),n("div",{staticClass:"col-span-12 xl:col-span-4"},[n("label",[t._v("Placement")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.placement,expression:"form.placement",modifiers:{number:!0}}],staticClass:"input w-full border mt-2",attrs:{type:"text",placeholder:"Placement"},domProps:{value:t.form.placement},on:{input:function(e){e.target.composing||t.$set(t.form,"placement",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),n("div",{staticClass:"flex justify-end mt-4"},[t.stock?n("button",{staticClass:"button shadow-md w-32 bg-white mb-2 text-gray-700 mr-3",attrs:{type:"button"},on:{click:t.closeModal}},[t._v("Cancel")]):t._e(),t._v(" "),n("loading-button",{attrs:{disabled:!t.form.amount},on:{click:function(e){t.stock?t.update():t.submit()}}})],1)])}),[],!1,null,null,null);e.default=r.exports}}]);